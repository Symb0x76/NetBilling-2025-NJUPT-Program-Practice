# NJUPT 程序设计 上网计费

> 个人自用，请勿用于商业用途！

南京邮电大学程序设计实践周作业，该项目为上网计费系统的源代码。

## TODO

-   [ ] 查漏补缺

## 设计思路

```txt
一、系统总体功能结构图
上网计费管理系统
├── 一、用户登录与权限管理模块
│ ├── 1.1 登录认证
│ │ ├── 管理员登录
│ │ └── 普通用户登录
│ │
│ ├── 1.2 权限控制
│ │ ├── 管理员：增删改查所有数据
│ │ └── 普通用户：仅可查自己的信息与账单
│ │
│ ├── 1.3 注册与密码修改
│ │ ├── 新用户注册
│ │ └── 修改登录密码
│ │
│ └── 1.4 账户状态管理
│   ├── 用户启用/停用
│   └── 权限等级调整
│
├── 二、文件管理模块
│ ├── 2.1 用户资料文件管理
│ │ ├── 新增用户资料
│ │ ├── 删除用户资料
│ │ ├── 修改用户资料
│ │ └── 查询用户资料
│ │
│ ├── 2.2 上网记录文件管理
│ │ ├── 新增上网记录
│ │ ├── 删除上网记录
│ │ ├── 修改上网记录
│ │ └── 查询上网记录
│ │
│ └── 2.3 文件读写与存储
│   ├── 加载文件数据
│   ├── 保存修改数据
│   └── 文件备份与恢复
│
├── 三、上网费用计算模块
│ ├── 3.1 按月读取上网记录
│ ├── 3.2 处理跨月/跨年数据
│ ├── 3.3 计算用户上网时长
│ ├── 3.4 根据套餐类型计算费用
│ ├── 3.5 生成账单文件（管理员）
│ └── 3.6 用户查询个人账单（普通用户）
│
├── 四、充值与余额管理模块（新增）
│ ├── 4.1 用户账户余额查询
│ ├── 4.2 充值功能
│ │ ├── 管理员代充值
│ │ └── 用户自助充值
│ ├── 4.3 扣费结算
│ ├── 4.4 余额不足提醒
│ └── 4.5 充值记录查询
│
├── 五、统计与报表模块
│ ├── 5.1 月度账单汇总
│ ├── 5.2 各套餐用户分布统计
│ ├── 5.3 系统总收入统计
│ ├── 5.4 导出统计报表（TXT / CSV）
│ └── 5.5 用户个人消费趋势图
│
├── 六、数据校验与随机生成模块（选做）
│ ├── 6.1 随机生成测试数据
│ ├── 6.2 上网记录合法性检查
│ ├── 6.3 异常记录日志
│ └── 6.4 自动剔除错误记录
│
└── 七、用户界面与系统设置模块
  ├── 7.1 主菜单（区分管理员/普通用户）
  ├── 7.2 控制台彩色输出或 MFC 图形界面
  ├── 7.3 系统参数设置（计费标准、路径）
  ├── 7.4 数据备份与恢复
  └── 7.5 退出系统

二、程序运行主流程（带权限逻辑）
程序启动
├── 登录界面
│ ├── 管理员登录 → 管理员主菜单
│ └── 普通用户登录 → 用户主菜单
│
├── 管理员主菜单
│ ├── 用户资料管理
│ ├── 上网记录管理
│ ├── 计算账单
│ ├── 充值系统
│ ├── 报表统计
│ ├── 系统设置
│ └── 退出系统
│
└── 普通用户主菜单
  ├── 查看个人信息
  ├── 查询上网记录
  ├── 查询账单
  ├── 账户充值
  ├── 查看充值记录
  └── 退出系统
```

## 使用方法

1. 安装 Qt，只需要最基本组件库即可
2. 配置 CMake, Ninja, C++ 环境
3. 下载 [ElaWidgetTools](https://github.com/Liniyous/ElaWidgetTools)

```bash
git submodule add https://github.com/Liniyous/ElaWidgetTools
```

> 如果不能通过编译请使用我修改过的版本
>
> ```bash
> git submodule add https://github.com/Symb0x76/ElaWidgetTools
> ```

4. 编译项目

```pwsh
cmake --build ./build
```

5. 打包可运行文件 (以)

将 `build/ElaWidgetTools.dll` 与 `/build/NetBilling.exe` 放在同一目录下，在该目录下运行

```cmd
windepolyqt NetBilling.exe
```

后即可正常运行

## 外部依赖

-   [Qt](https://www.qt.io/): 框架
-   [ElaWidgetTools](https://github.com/Liniyous/ElaWidgetTools): UI
